# AI Usage Guide - Pattern Catalog

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€AIï¼ˆClaudeã€ChatGPTç­‰ï¼‰ãŒã“ã®ã‚«ã‚¿ãƒ­ã‚°ã‚’å‚ç…§ã—ã¦æ¥­å‹™ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹éš›ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã™ã€‚

---

## ğŸš¨ å®Ÿè£…å‰ã«å¿…ãšèª­ã‚€ã“ã¨ï¼ˆMUST READï¼‰

**ç‹¬è‡ªå®Ÿè£…ã«ã‚ˆã‚‹æ‰‹æˆ»ã‚Šã‚’é˜²ããŸã‚ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å¿…ãšå®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚**

> **âš ï¸ ã¾ãš [COMMON_MISTAKES.md](COMMON_MISTAKES.md) ã‚’èª­ã‚“ã§ãã ã•ã„**
>
> é »å‡ºã™ã‚‹å®Ÿè£…ãƒŸã‚¹ï¼ˆSaveChangesAsyncé‡è¤‡ã€Value Objectæ¯”è¼ƒã€Boundaryåˆ¤å®šãªã©ï¼‰ãŒã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚

### ãªãœã‚«ã‚¿ãƒ­ã‚°å‚ç…§ãŒå¿…é ˆãªã®ã‹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MediatR + FluentValidation + Pipeline Behaviors ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
ã‚«ã‚¿ãƒ­ã‚°ã‚’å‚ç…§ã›ãšã«å®Ÿè£…ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ï¼š

| ã‚ˆãã‚ã‚‹å¤±æ•— | åŸå›  | çµæœ |
|-------------|------|------|
| ç‹¬è‡ªCQRSå®Ÿè£… | MediatRã®å­˜åœ¨ã‚’çŸ¥ã‚‰ãªã„ | å…¨é¢çš„ãªæ›¸ãç›´ã— |
| DIãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ä¸ä¸€è‡´ | Singleton/Scopedæ··åœ¨ | å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ |
| HandleAsyncãƒ¡ã‚½ãƒƒãƒ‰å | MediatRã¯Handle | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ |
| SaveChangesAsyncå‘¼ã³å‡ºã— | TransactionBehaviorãŒè‡ªå‹•å®Ÿè¡Œ | äºŒé‡ä¿å­˜ |

### å®Ÿè£…å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```
â–¡ catalog/index.json ã‚’èª­ã‚“ã ã‹ï¼Ÿ
â–¡ è©²å½“ãƒ‘ã‚¿ãƒ¼ãƒ³ã® YAML ã‚’èª­ã‚“ã ã‹ï¼Ÿ
â–¡ wiring ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¢ºèªã—ãŸã‹ï¼Ÿ
â–¡ ai_guidance.common_mistakes ã‚’ç¢ºèªã—ãŸã‹ï¼Ÿ
```

**ã“ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã¨ã€ç‹¬è‡ªå®Ÿè£…â†’ä¿®æ­£ã®æ‰‹æˆ»ã‚ŠãŒç™ºç”Ÿã—ã¾ã™ã€‚**

---

## ğŸš¨ è¨ˆç”»ãƒ•ã‚§ãƒ¼ã‚ºã®å¿…èª­ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆCRITICALï¼‰

**UIãŒã‚ã‚‹æ©Ÿèƒ½ã‚’è¨ˆç”»ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¿…ãšèª­ã‚“ã§ãã ã•ã„ã€‚**

### ãªãœå¿…èª­ãªã®ã‹

```
ã€AIã®å­¦ç¿’ãƒã‚¤ã‚¢ã‚¹å•é¡Œã€‘
å¤å…¸çš„DDDã¯UIã‚’å¯¾è±¡å¤–ã¨ã™ã‚‹ãŸã‚ã€AIã¯ã€ŒBoundaryã‚’ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã™ã‚‹ã€ã¨ã„ã†
ç™ºæƒ³ã‚’æŒã¡ã¾ã›ã‚“ã€‚é«˜ãƒ¬ãƒ™ãƒ«ã‚¬ã‚¤ãƒ‰ã ã‘èª­ã‚“ã§è¨ˆç”»ã‚’ç«‹ã¦ã‚‹ã¨ã€BoundaryãŒæ¬ è½ã—ã¾ã™ã€‚

ã“ã‚Œã¯ã€ŒBoundaryãŒé‡è¦ã€ã¨ã„ã†èª¬æ˜ã§ã¯è§£æ±ºã§ãã¾ã›ã‚“ã€‚
ãƒ‘ã‚¿ãƒ¼ãƒ³YAMLã‚’å®Ÿéš›ã«èª­ã‚“ã§ã€æ§‹é€ ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
```

### æ¡ä»¶åˆ¥ã®å¿…èª­ãƒ‘ã‚¿ãƒ¼ãƒ³

| æ¡ä»¶ | å¿…èª­ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|------|-------------|------|
| **UIãŒã‚ã‚‹** | `boundary-pattern.yaml` | æ“ä½œå¯å¦åˆ¤å®šã€Intentå®šç¾© |
| çŠ¶æ…‹é·ç§»ãŒã‚ã‚‹ | `domain-state-machine.yaml` | çŠ¶æ…‹é·ç§»ã®åˆ¶ç´„ |
| é‡è¤‡ãƒã‚§ãƒƒã‚¯ãŒå¿…è¦ | `domain-validation-service.yaml` | ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«æ¤œè¨¼ |
| æ™‚é–“æ ã‚’æ‰±ã† | `domain-timeslot.yaml` | æ™‚é–“æ ã®æŠ½è±¡åŒ– |
| äºˆç´„ãƒ»åœ¨åº«ã‚’æ‰±ã† | `concurrency-control.yaml` | åŒæ™‚å®Ÿè¡Œåˆ¶å¾¡ |

### è¨ˆç”»ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**è¨ˆç”»ã‚’æå‡ºã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ï¼š**

#### Boundaryãƒ¢ãƒ‡ãƒªãƒ³ã‚°ï¼ˆUIãŒã‚ã‚‹å ´åˆã¯å¿…é ˆï¼‰

```
â–¡ boundary-pattern.yaml ã‚’èª­ã‚“ã ã‹ï¼Ÿ
â–¡ å…¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã« Boundary ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã‹ï¼Ÿ
â–¡ Intentï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ï¼‰ã‚’åˆ—æŒ™ã—ãŸã‹ï¼Ÿ
â–¡ å„Intentã«å¯¾å¿œã™ã‚‹ Entity.CanXxx() ã‚’è¨­è¨ˆã—ãŸã‹ï¼Ÿ
â–¡ BoundaryDecision ã‚’è¿”ã™è¨­è¨ˆã«ãªã£ã¦ã„ã‚‹ã‹ï¼Ÿ
```

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

```
â–¡ æ¥­å‹™ãƒ«ãƒ¼ãƒ«ã® if æ–‡ãŒ BoundaryService ã«å…¥ã£ã¦ã„ãªã„ã‹ï¼Ÿ
â–¡ Entity ã« CanXxx() ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã‹ï¼Ÿ
â–¡ BoundaryService ã¯å§”è­²ã®ã¿ã‹ï¼Ÿ
```

### è¨ˆç”»ãŒä¸åˆæ ¼ã¨ãªã‚‹æ¡ä»¶

ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«è©²å½“ã™ã‚‹å ´åˆã€è¨ˆç”»ã¯ä¸å®Œå…¨ã§ã™ï¼š

| æ¡ä»¶ | åˆ¤å®š |
|-----|------|
| UIãŒã‚ã‚‹ã®ã« Boundary ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒãªã„ | âŒ ä¸åˆæ ¼ |
| Intent ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ | âŒ ä¸åˆæ ¼ |
| Entity.CanXxx() ã®è¨­è¨ˆãŒãªã„ | âŒ ä¸åˆæ ¼ |
| ã€Œå¾Œã‹ã‚‰ Boundary ã‚’è¿½åŠ ã™ã‚‹ã€ã¨ã„ã†è¨ˆç”» | âŒ ä¸åˆæ ¼ |
| boundary-pattern.yaml ã‚’èª­ã¾ãšã«è¨ˆç”»ã‚’ç«‹ã¦ãŸ | âŒ ä¸åˆæ ¼ |

### æ­£ã—ã„è¨ˆç”»ã®æ§‹é€ 

```markdown
## æ©Ÿèƒ½å: å›³æ›¸è²¸å‡º

### 1. Boundaryï¼ˆâ˜…å¿…é ˆãƒ»æœ€åˆã«è¨­è¨ˆï¼‰
- Intent: Borrow, Return, Extend, Reserve
- Entity.CanXxx():
  - Book.CanBorrow() â†’ è²¸å‡ºå¯å¦åˆ¤å®š
  - Book.CanReturn() â†’ è¿”å´å¯å¦åˆ¤å®š

### 2. Domain Model
- Bookï¼ˆEntityï¼‰: CanBorrow(), CanReturn() ã‚’æŒã¤
- Loanï¼ˆEntityï¼‰

### 3. Application
- BorrowBookCommand
- ReturnBookCommand

### 4. UI
- BorrowBook.razorï¼ˆBoundaryçµæœã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ï¼‰
```

**é‡è¦**: Boundaryã¯ã€Œæœ€åˆã«è¨­è¨ˆã™ã‚‹ã€ã‚‚ã®ã§ã‚ã‚Šã€ã€Œå¾Œã‹ã‚‰è¿½åŠ ã™ã‚‹ã€ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

1. **ã¾ãš `catalog/index.json` ã‚’èª­ã‚€**
2. **è©²å½“ãƒ‘ã‚¿ãƒ¼ãƒ³ã® YAML ã‚’èª­ã‚€**ï¼ˆä¾‹: `catalog/patterns/command-create.yaml`ï¼‰
3. **`wiring` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèª** â†’ å¿…è¦ãªNuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨DIç™»éŒ²
4. **`ai_guidance.common_mistakes` ã‚’ç¢ºèª** â†’ é™¥ã‚Šã‚„ã™ã„ãƒŸã‚¹ã‚’å›é¿

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³é–“é€£æºã‚’ç†è§£ã™ã‚‹ãŸã‚ã®æ¦‚å¿µå›³ã§ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           UI Layer                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Component  â”‚â”€â”€â”€â–¶â”‚ PageActions  â”‚â”€â”€â”€â–¶â”‚      Store         â”‚      â”‚
â”‚  â”‚  (View)    â”‚â—€â”€â”€â”€â”‚  (UIæ‰‹é †)    â”‚â—€â”€â”€â”€â”‚  (çŠ¶æ…‹ç®¡ç†+I/O)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚ IMediator.Send()
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MediatR Pipeline                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Pipeline Behaviors                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Metrics  â”‚â”€â”€â–¶â”‚ Validation  â”‚â”€â”€â–¶â”‚Transaction  â”‚â”€â”€â–¶â”‚Handler â”‚ â”‚ â”‚
â”‚  â”‚  â”‚Behavior â”‚   â”‚  Behavior   â”‚   â”‚  Behavior   â”‚   â”‚        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (50)    â”‚   â”‚   (100)     â”‚   â”‚   (400)     â”‚   â”‚        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  Features/                                                           â”‚
â”‚  â”œâ”€â”€ CreateProduct/   â”€â”                                            â”‚
â”‚  â”œâ”€â”€ UpdateProduct/    â”‚ å„Featureã¯ç‹¬ç«‹ã—ãŸå‚ç›´ã‚¹ãƒ©ã‚¤ã‚¹            â”‚
â”‚  â”œâ”€â”€ GetProducts/      â”‚ Command/Query + Handler + Validator        â”‚
â”‚  â””â”€â”€ SearchProducts/  â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Domain Layer                                 â”‚
â”‚  src/Domain/{BoundedContext}/                                       â”‚
â”‚  â”œâ”€â”€ Entities      (Product, PurchaseRequest)                       â”‚
â”‚  â”œâ”€â”€ Value Objects (Money, ProductId)                               â”‚
â”‚  â”œâ”€â”€ Enums         (ProductStatus, ApprovalStatus)                  â”‚
â”‚  â””â”€â”€ Domain Events (ProductCreatedEvent)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®èª¬æ˜

1. **UI â†’ Application**: `IMediator.Send()` ã§Command/Queryã‚’é€ä¿¡
2. **Pipeline Behaviors**: è‡ªå‹•çš„ã«æ¤œè¨¼ãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ­ã‚®ãƒ³ã‚°ã‚’é©ç”¨
3. **Handler â†’ Domain**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯Domainå±¤ã§å®Ÿè¡Œ
4. **Domain â†’ Infrastructure**: RepositoryçµŒç”±ã§ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

- **Handlerå†…ã§SaveChangesAsyncã‚’å‘¼ã°ãªã„** â†’ TransactionBehaviorãŒè‡ªå‹•å®Ÿè¡Œ
- **ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯Scopedã§ç™»éŒ²** â†’ MediatRãŒScopedã®ãŸã‚
- **Command/Queryã¯Result<T>ã‚’è¿”ã™** â†’ ä¾‹å¤–ã§ã¯ãªãæ˜ç¤ºçš„ãªã‚¨ãƒ©ãƒ¼ä¼æ’­

---

## ğŸ“ UIé…ç½®ãƒ«ãƒ¼ãƒ«

> **è©³ç´°ã¯ `catalog/scaffolds/project-structure.yaml` ã‚’å‚ç…§**

VSA ã§ã¯æ©Ÿèƒ½ãƒ•ã‚©ãƒ«ãƒ€ã« UI ã‚‚ Command ã‚‚ Handler ã‚‚**åŒåˆ—ã«**ã¾ã¨ã‚ã¦è¦‹é€šã—ã‚’è‰¯ãã—ã¾ã™ã€‚

### é…ç½®åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```
Q1: ã“ã®.razorã¯ç‰¹å®šã®1æ©Ÿèƒ½ã§ã®ã¿ä½¿ã†ã‹ï¼Ÿ
    â”‚
    â”œâ”€ Yes â†’ Features/{Feature}/ ã« .cs ã¨åŒåˆ—é…ç½®
    â”‚        ä¾‹: Features/CreateBooking/CreateBooking.razor
    â”‚
    â””â”€ No â†’ Q2ã¸
         â”‚
         Q2: @page ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒã‚ã‚‹ã‹ï¼Ÿ
         â”‚
         â”œâ”€ Yes â†’ Components/Pages/
         â”‚        ä¾‹: Home.razor, Dashboard.razor
         â”‚
         â””â”€ No â†’ Components/Shared/
                 ä¾‹: ErrorDisplay.razor
```

### é…ç½®ãƒ«ãƒ¼ãƒ«æ—©è¦‹è¡¨

| æ¡ä»¶ | é…ç½®å ´æ‰€ | ä¾‹ |
|-----|---------|-----|
| **æ©Ÿèƒ½å›ºæœ‰UI** | `Features/{Feature}/` ã«åŒåˆ—é…ç½® | CreateBooking.razor |
| **è¤‡æ•°æ©Ÿèƒ½ã§ä½¿ã†åŸºç›¤ãƒšãƒ¼ã‚¸** | `Components/Pages/` | Home.razor |
| **BCæ¨ªæ–­ã®å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** | `Components/Shared/` | ErrorDisplay.razor |
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¿…é ˆ** | `Components/Layout/` | MainLayout.razor |

### å…·ä½“ä¾‹

#### ä¾‹1: äºˆç´„ä½œæˆæ©Ÿèƒ½

äºˆç´„ä½œæˆç”»é¢ã¯ CreateBooking æ©Ÿèƒ½å°‚ç”¨ â†’ **Features å†…ã«åŒåˆ—é…ç½®**

```
Features/
â””â”€â”€ CreateBooking/
    â”œâ”€â”€ CreateBookingCommand.cs
    â”œâ”€â”€ CreateBookingCommandHandler.cs
    â”œâ”€â”€ CreateBookingCommandValidator.cs
    â””â”€â”€ CreateBooking.razor      # â˜… åŒåˆ—é…ç½®ï¼ˆUI/ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã¯ä½œã‚‰ãªã„ï¼‰
```

#### ä¾‹2: ãƒ›ãƒ¼ãƒ ç”»é¢

ãƒ›ãƒ¼ãƒ ç”»é¢ã¯ç‰¹å®šæ©Ÿèƒ½ã«å±ã•ãªã„ â†’ **Components/Pages ã«é…ç½®**

```
Components/
â””â”€â”€ Pages/
    â””â”€â”€ Home.razor
```

### ç¦æ­¢äº‹é …

| ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|-------------|------|
| `Features/{Feature}/UI/` ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ | ä¸è¦ãªéšå±¤ã€‚åŒåˆ—é…ç½®ãŒæ­£ã—ã„ |
| `Shared/{BC}/` ãƒ•ã‚©ãƒ«ãƒ€ | Sharedãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«BCæ··å…¥ç¦æ­¢ |

---

## ğŸ“š ã‚«ã‚¿ãƒ­ã‚°ã®æ§‹é€ 

```
catalog/
â”œâ”€â”€ index.json                        # ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ã‚¿ãƒ­ã‚°ã®ç´¢å¼•ï¼ˆå¿…ãšæœ€åˆã«èª­ã‚€ï¼‰
â”œâ”€â”€ patterns/                         # å€‹åˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ï¼ˆYAMLå½¢å¼ï¼‰
â”‚   â”œâ”€â”€ validation-behavior.yaml
â”‚   â”œâ”€â”€ transaction-behavior.yaml
â”‚   â”œâ”€â”€ authorization-behavior.yaml
â”‚   â”œâ”€â”€ logging-behavior.yaml
â”‚   â”œâ”€â”€ metrics-behavior.yaml
â”‚   â”œâ”€â”€ idempotency-behavior.yaml
â”‚   â”œâ”€â”€ query-get-list.yaml
â”‚   â””â”€â”€ command-create.yaml
â””â”€â”€ AI_USAGE_GUIDE.md                 # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ¤– AI ã®å‚ç…§ãƒ•ãƒ­ãƒ¼

### 1. åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚

```mermaid
graph TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã‚’å—ã‘å–ã‚‹] --> B[catalog/index.json ã‚’èª­ã¿è¾¼ã‚€]
    B --> C[categories ã¨ patterns ã‚’ç†è§£]
    C --> D[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã«åˆè‡´ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢]
    D --> E[è©²å½“ãƒ‘ã‚¿ãƒ¼ãƒ³ã® YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€]
    E --> F[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®Ÿéš›ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åã§ç½®æ›]
    F --> G[ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤º]
```

### 2. ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ã®å„ªå…ˆé †ä½

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã‚’åˆ†é¡ã™ã‚‹**
   - ãƒ‡ãƒ¼ã‚¿å–å¾—? â†’ `query-pattern` ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
   - ãƒ‡ãƒ¼ã‚¿å¤‰æ›´? â†’ `command-pattern` ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
   - æ¨ªæ–­çš„é–¢å¿ƒäº‹? â†’ `pipeline-behavior` ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
   - UIå®Ÿè£…? â†’ `ui-pattern` ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢

2. **intent ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§çµã‚Šè¾¼ã‚€**
   - `catalog/index.json` ã®å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã® `intent` ã‚’ç¢ºèª
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã«æœ€ã‚‚è¿‘ã„ `intent` ã‚’æŒã¤ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¸æŠ

3. **tags ã§è¿½åŠ æ¤œç´¢**
   - `tags` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’ç¢ºèª
   - ä¾‹: `["dapper", "cache"]` â†’ Dapper ã¨ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã£ãŸå®Ÿè£…

---

## ğŸ“– ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ã®èª­ã¿æ–¹

å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã® YAML ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®æ§‹é€ ã«ãªã£ã¦ã„ã¾ã™:

```yaml
id: validation-behavior              # ä¸€æ„ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ID
version: 1.3.0                        # ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°
name: ValidationBehavior              # ãƒ‘ã‚¿ãƒ¼ãƒ³å
category: pipeline-behavior           # ã‚«ãƒ†ã‚´ãƒª
intent: "FluentValidation ã«ã‚ˆã‚‹..."  # ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç›®çš„ï¼ˆAIæ¤œç´¢ç”¨ï¼‰
order_hint: 100                       # å®Ÿè¡Œé †åºï¼ˆBehaviorã®å ´åˆï¼‰

wiring:                               # DIç™»éŒ²ã¨NuGetä¾å­˜é–¢ä¿‚
  service_registrations:
    - "services.AddScoped(...)"
  dependencies:
    nuget:
      - FluentValidation: "^11.0.0"

preconditions:                        # å‰ææ¡ä»¶
  - "FluentValidation ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹"

implementation:                       # å®Ÿè£…ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  file_path: "src/{BoundedContext}/..."
  template: |
    public sealed class ValidationBehavior<TRequest, TResponse>
    {
      // ...
    }

example_usage: |                     # ä½¿ç”¨ä¾‹
  public sealed record CreateProductCommand(...);

tests:                                # ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
  - name: "æœªå…¥åŠ›ã§æ¤œè¨¼ã‚¨ãƒ©ãƒ¼"
    given: "Name ãŒç©ºæ–‡å­—åˆ—"
    when: "CreateProductCommand ã‚’å®Ÿè¡Œ"
    then: "Result.IsSuccess == false"
    expect: "æ¤œè¨¼ã‚¨ãƒ©ãƒ¼"

ai_guidance:                          # AIå‘ã‘ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
  when_to_use:
    - "Command ã®å…¥åŠ›æ¤œè¨¼ãŒå¿…è¦ãªå ´åˆ"
  when_not_to_use:
    - "ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯å†…ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«æ¤œè¨¼"
  common_mistakes:
    - mistake: "Validator ã‚’ DI ç™»éŒ²ã—å¿˜ã‚Œã‚‹"
      solution: "services.AddValidatorsFromAssembly()"

changelog:                            # å¤‰æ›´å±¥æ­´
  - version: 1.3.0
    date: 2025-11-05
    changes:
      - "Result å‹ã¸ã®å¯¾å¿œã‚’å¼·åŒ–"

evidence:                             # ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ï¼ˆå®Ÿè£…ä¾‹ï¼‰
  implementation_file: "src/ProductCatalog/..."
  test_file: "tests/..."
```

---

## ğŸ¯ AIãŒå®Ÿè£…ã‚’ç”Ÿæˆã™ã‚‹æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é¸æŠ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚: "å•†å“ã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„"

â†’ AI ã®åˆ¤æ–­:
  1. ãƒ‡ãƒ¼ã‚¿å¤‰æ›´ãªã®ã§ `command-pattern` ã‚«ãƒ†ã‚´ãƒª
  2. æ–°è¦ä½œæˆãªã®ã§ `command-create` ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé©åˆ‡
  3. catalog/patterns/command-create.yaml ã‚’èª­ã¿è¾¼ã‚€
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã®ç½®æ›

```yaml
# command-create.yaml ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
template: |
  public sealed record Create{Entity}Command(
      string Name,
      decimal Price
  ) : ICommand<Result<Guid>>
```

â†’ ç½®æ›å¾Œ:

```csharp
public sealed record CreateProductCommand(
    string Name,
    decimal Price
) : ICommand<Result<Guid>>
```

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°:**
- `{Entity}` â†’ `Product` (PascalCase) - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å
- `{entity}` â†’ `product` (camelCase) - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å
- `{BoundedContext}` â†’ `ProductCatalog` (PascalCase) - å¢ƒç•Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå

### ã‚¹ãƒ†ãƒƒãƒ—3: ä¾å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºèª

```yaml
dependencies:
  patterns:
    - validation-behavior
    - transaction-behavior
    - idempotency-behavior
```

â†’ ã“ã‚Œã‚‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚èª­ã¿è¾¼ã¿ã€å¿…è¦ã«å¿œã˜ã¦ç”Ÿæˆã™ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—4: é…ç½®å ´æ‰€ã®æ±ºå®š

```yaml
implementation:
  file_path: "src/{BoundedContext}/Features/Create{Entity}/Create{Entity}Command.cs"
```

â†’ å®Ÿéš›ã®ãƒ‘ã‚¹:
```
src/Application/Features/CreateProduct/CreateProductCommand.cs
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã®æç¤º

```yaml
evidence:
  command: "src/Application/Features/CreateProduct/CreateProductCommand.cs"
  handler: "src/Application/Features/CreateProduct/CreateProductCommandHandler.cs"
```

â†’ AIã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦:
```
å®Ÿè£…ä¾‹ã¯ã“ã¡ã‚‰ã§ç¢ºèªã§ãã¾ã™:
- Command: src/Application/Features/CreateProduct/CreateProductCommand.cs
- Handler: src/Application/Features/CreateProduct/CreateProductCommandHandler.cs
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ’ãƒ³ãƒˆã®ç¢ºèªï¼ˆâ˜… é‡è¦ï¼‰

Feature Slice ã‚’é¸æŠã—ãŸã‚‰ã€**å¿…ãš `domain_hints` ã‚’ç¢ºèª**ã—ã¦ãã ã•ã„ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦ã€è¿½åŠ ã§é©ç”¨ã™ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚: "ä¼šè­°å®¤äºˆç´„ã®ä½œæˆæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„"

â†’ AI ã®åˆ¤æ–­:
  1. feature-create-entity ã‚’é¸æŠ
  2. domain_hints ã‚’ç¢ºèª
  3. ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€Œäºˆç´„ã€ã€Œä¼šè­°å®¤ã€ã«ãƒãƒƒãƒ
  4. ã€Œäºˆç´„ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç³»ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç‰¹å®š
  5. recommended_patterns ã‚’è¿½åŠ é©ç”¨:
     - domain-timeslotï¼ˆæ™‚é–“æ ã®æŠ½è±¡åŒ–ï¼‰
     - domain-typed-idï¼ˆBookingId, RoomIdã®å‹å®‰å…¨æ€§ï¼‰
     - domain-validation-serviceï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
     - query-get-by-periodï¼ˆæœŸé–“ã§ã®æ¤œç´¢ï¼‰
     - concurrency-controlï¼ˆåŒæ™‚äºˆç´„é˜²æ­¢ï¼‰
```

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ’ãƒ³ãƒˆã®æ§‹é€ 

```yaml
domain_hints:
  äºˆç´„ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç³»:
    description: "ä¼šè­°å®¤äºˆç´„ã€ã‚·ãƒ•ãƒˆç®¡ç†ã€ã‚¤ãƒ™ãƒ³ãƒˆäºˆç´„ãªã©"
    trigger_keywords:
      - "äºˆç´„"
      - "ä¼šè­°å®¤"
      - "ã‚·ãƒ•ãƒˆ"
      - "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"
    recommended_patterns:
      - id: domain-timeslot
        reason: "é–‹å§‹/çµ‚äº†æ™‚åˆ»ã‚’æŒã¤æ™‚é–“æ ã®æŠ½è±¡åŒ–"
      - id: domain-typed-id
        reason: "BookingId, RoomId ãªã©é›†ç´„IDã®å‹å®‰å…¨æ€§"
```

#### å¯¾å¿œãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§

| ãƒ‰ãƒ¡ã‚¤ãƒ³ | ãƒˆãƒªã‚¬ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ |
|---------|------------------|-------------|
| äºˆç´„ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç³» | äºˆç´„, ä¼šè­°å®¤, ã‚·ãƒ•ãƒˆ, ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | domain-timeslot, domain-typed-id, domain-validation-service, query-get-by-period, concurrency-control |
| åœ¨åº«ãƒ»å¼•å½“ç³» | åœ¨åº«, å¼•å½“, æ®‹é«˜, å‰²å½“ | domain-validation-service, concurrency-control, domain-typed-id |
| æ‰¿èªãƒ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç³» | æ‰¿èª, ç¨Ÿè­°, ç”³è«‹, ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | domain-state-machine, domain-approval-history, boundary-pattern |
| ãƒã‚¹ã‚¿ãƒ»ã‚«ã‚¿ãƒ­ã‚°ç³» | ãƒã‚¹ã‚¿, ã‚«ã‚¿ãƒ­ã‚°, å•†å“, é¡§å®¢ | domain-typed-id, caching-behavior |

**é‡è¦**: ã‚¹ãƒ©ã‚¤ã‚¹ã ã‘ã‚’é©ç”¨ã—ã¦çµ‚ã‚ã‚‰ãšã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ’ãƒ³ãƒˆã§æ¨å¥¨ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ç¢ºèªãƒ»é©ç”¨ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ´»ç”¨

å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯ `tests` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚AIã¯ã“ã‚Œã‚’å‚è€ƒã«:

1. **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã‚’ç†è§£ã™ã‚‹**
   ```yaml
   tests:
     - name: "æœªå…¥åŠ›ã§æ¤œè¨¼ã‚¨ãƒ©ãƒ¼"
       given: "Name ãŒç©ºæ–‡å­—åˆ—"
       when: "CreateProductCommand ã‚’å®Ÿè¡Œ"
       then: "Result.IsSuccess == false"
   ```

2. **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹**
   ```csharp
   [Fact]
   public async Task æœªå…¥åŠ›ã§æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚Œã‚‹()
   {
       // Arrange
       var command = new CreateProductCommand(Name: "", ...);

       // Act
       var result = await _mediator.Send(command);

       // Assert
       Assert.False(result.IsSuccess);
       Assert.Contains("å•†å“åã¯å¿…é ˆã§ã™", result.ErrorMessage);
   }
   ```

---

## âš ï¸ AI ãŒæ³¨æ„ã™ã¹ãç‚¹

### 1. common_mistakes ã‚’å¿…ãšç¢ºèª

å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã® `ai_guidance.common_mistakes` ã«ã¯ã€AIãŒé™¥ã‚Šã‚„ã™ã„ãƒŸã‚¹ã¨è§£æ±ºç­–ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

```yaml
ai_guidance:
  common_mistakes:
    - mistake: "SaveChangesAsync ã‚’å‘¼ã³å‡ºã™"
      solution: "TransactionBehavior ãŒè‡ªå‹•ã§ SaveChangesAsync ã‚’å‘¼ã¶ãŸã‚ä¸è¦"
```

â†’ AIã¯ã“ã‚Œã‚’èª­ã¿ã€**æ„å›³çš„ã« SaveChangesAsync ã‚’ç”Ÿæˆã—ãªã„** ã‚ˆã†ã«æ³¨æ„ã™ã‚‹

### 2. when_not_to_use ã‚’ç¢ºèª

```yaml
ai_guidance:
  when_not_to_use:
    - "å¤§é‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ1000ä»¶ä»¥ä¸Šï¼‰â†’ SearchQuery + Paging ã‚’ä½¿ç”¨"
```

â†’ AIã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ãŒã€Œå¤§é‡ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€ã§ã‚ã‚‹å ´åˆã€åˆ¥ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ææ¡ˆã™ã‚‹

### 3. stability ãƒ¬ãƒ™ãƒ«ã‚’ç¢ºèª

```json
{
  "id": "idempotency-behavior",
  "stability": "beta"
}
```

â†’ `beta` ã®å ´åˆã€AIã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œã“ã®æ©Ÿèƒ½ã¯ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã™ã€ã¨æ˜ç¤ºã™ã‚‹

---

## ğŸ“Š ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã®ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£

å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã® `evidence` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯ã€å®Ÿéš›ã®å®Ÿè£…ä¾‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

```yaml
evidence:
  implementation_file: "src/Application/Common/Behaviors/ValidationBehavior.cs"
  test_file: "æœªå®Ÿè£… - ä»Šå¾Œã®å®Ÿè£…äºˆå®š"
  example_command: "src/Application/Features/CreateProduct/CreateProductCommand.cs"
```

AIã¯ã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã«ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤ºã™ã‚‹ã“ã¨ã§:

1. **å®Ÿè£…ä¾‹ã‚’å‚ç…§ã§ãã‚‹**
2. **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã§ãã‚‹**
3. **å®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã§ãã‚‹**

---

## ğŸš€ å®Ÿè·µä¾‹: å•†å“ä½œæˆæ©Ÿèƒ½ã®å®Ÿè£…

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚

```
ã€Œå•†å“ã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€
```

### AI ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼

1. **catalog/index.json ã‚’èª­ã¿è¾¼ã‚€**
   ```json
   {
     "id": "command-create",
     "intent": "æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä½œæˆã‚³ãƒãƒ³ãƒ‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"
   }
   ```

2. **catalog/patterns/command-create.yaml ã‚’èª­ã¿è¾¼ã‚€**

3. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã‚’ç½®æ›**
   - `{Entity}` â†’ `Product`
   - `{BoundedContext}` â†’ `ProductCatalog`

4. **ä¾å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¢ºèª**
   - `validation-behavior` ãŒå¿…è¦
   - `transaction-behavior` ãŒå¿…è¦
   - `idempotency-behavior` ãŒå¿…è¦

5. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ**
   - `CreateProductCommand.cs`
   - `CreateProductHandler.cs`
   - `CreateProductValidator.cs`

6. **ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã‚’æç¤º**
   ```
   å®Ÿè£…ä¾‹:
   - Command: src/Application/Features/CreateProduct/CreateProductCommand.cs
   - Handler: src/Application/Features/CreateProduct/CreateProductCommandHandler.cs
   ```

7. **æ³¨æ„ç‚¹ã‚’ä¼ãˆã‚‹**
   ```
   âš ï¸ common_mistakes ã‚ˆã‚Š:
   - SaveChangesAsync ã¯ TransactionBehavior ãŒè‡ªå‹•ã§å‘¼ã¶ãŸã‚ä¸è¦ã§ã™
   - IdempotencyKey ã¯ç”»é¢è¡¨ç¤ºæ™‚ã«1å›ã ã‘ç”Ÿæˆã—ã¦ãã ã•ã„
   ```

---

## ğŸ“ AIã¸ã®æ¨å¥¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ AI ã«ã“ã®ã‚«ã‚¿ãƒ­ã‚°ã‚’ä½¿ã‚ã›ã‚‹å ´åˆã®æ¨å¥¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:

```
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ catalog/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ã‚¿ãƒ­ã‚°ãŒã‚ã‚Šã¾ã™ã€‚
æ–°æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹éš›ã¯ã€å¿…ãšä»¥ä¸‹ã®æ‰‹é †ã§é€²ã‚ã¦ãã ã•ã„:

1. catalog/index.json ã‚’èª­ã¿è¾¼ã¿ã€é©åˆ‡ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢
2. è©²å½“ãƒ‘ã‚¿ãƒ¼ãƒ³ã® YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
3. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã‚’ç½®æ›ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
4. ai_guidance ã® common_mistakes ã‚’ç¢ºèª
5. evidence ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æç¤º

å¿…ãš catalog/ ã‚’å‚ç…§ã—ã€æ—¢å­˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
```

---

## ğŸ”„ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ã‚¿ã‚°å›ºå®š

AIãŒã‚«ã‚¿ãƒ­ã‚°ã‚’å‚ç…§ã™ã‚‹éš›ã¯ã€**å¿…ãšã‚¿ã‚°å›ºå®š**ã—ã¦ãã ã•ã„ã€‚

```json
{
  "catalog_index": "github:akiramei/blazor-enterprise-architecture-poc/catalog/index.json@v2025.11"
}
```

ã“ã‚Œã«ã‚ˆã‚Š:
- **å†ç¾æ€§**: åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¸¸ã«å–å¾—
- **å®‰å®šæ€§**: ã‚«ã‚¿ãƒ­ã‚°ã®æ›´æ–°ã«ã‚ˆã‚‹å½±éŸ¿ã‚’å—ã‘ãªã„
- **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£**: ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ãŸã‹ãŒæ˜ç¢º

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ã“ã®ã‚«ã‚¿ãƒ­ã‚°ã«ã¤ã„ã¦è³ªå•ãŒã‚ã‚‹å ´åˆ:
- GitHub Issues: https://github.com/akiramei/blazor-enterprise-architecture-poc/issues
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: docs/blazor-guide-package/

---

**æœ€çµ‚æ›´æ–°: 2025-11-24**
**ã‚«ã‚¿ãƒ­ã‚°ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v2025.11.24**
